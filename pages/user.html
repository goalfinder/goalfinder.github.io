<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="The GoalFinder device user documentation page">

		<link rel="stylesheet" href="../styles/documentation.css">
		<link rel="stylesheet" href="../tools/markdown-converter/markdown-styles.css">
		<link rel="icon" href="../assets/img/logos/goalfinder/logo-small-shadow.png" type="image">

		<script>
			(function () {
				const savedTheme = localStorage.getItem("theme");
				// Apply dark mode class immediately to prevent flash
				if (savedTheme === "dark") {
					document.documentElement.classList.add("dark-mode");
				}
				// Update button icon/text after DOM is ready
				function updateToggleButton() {
					const toggleButton = document.getElementById("lightDarkToggle");
					if (toggleButton && savedTheme === "dark") {
						const toggleIcon = toggleButton.querySelector(".icon");
						const toggleText = toggleButton.querySelector(".icon-text");
						toggleIcon.src = "../assets/img/svg/light.svg";
						toggleText.textContent = "Light Mode";
					}
				}
				if (document.readyState === "loading") {
					document.addEventListener("DOMContentLoaded", updateToggleButton);
				} else {
					updateToggleButton();
				}
			})();

			function toggleSources(id) {
				const element = document.getElementById(id);
				if (element) {
					element.classList.toggle("expanded");
				}
			}
		</script>

		<script type="module" src="../scripts/user.js"></script>
		
		<title data-i18n="ud-title-short"></title>
	</head>

	<body>
		<header>
			<!-- Header-->
			<div class="header-logo">
				<!-- Sidebar toggle as an icon-only control placed top-left -->
				<button id="topicToggle" class="topic-toggle" aria-label="Toggle sidebar" aria-expanded="false">
					<img class="topic-toggle-icon" src="../assets/img/svg/hamburger.svg" alt="menu">
				</button>
				<img src="../assets/img/logos/goalfinder/logo-shadow.png" class="header-image" id="header-icon" alt="Logo">
				<p class="header-text" data-i18n="ud-title"></p>
				<div class="header-controls">
					<div class="header-search-bar">
						<img class="icon search-icon" src="../assets/img/svg/search.svg" alt="search-icon" />
						<input type="text" onfocus="searchbarFocus()" onblur="searchbarBlur()" oninput="searchbarSearch()" id="searchInput" placeholder="Search documentation..." data-i18n="search" />
						<div id="searchPopup" class="search-popup">
							<!-- Popup content goes here -->
							<ul class="search-results">
								<li class="search-no-results" data-i18n="search-hint"></li>
							</ul>
						</div>
					</div>
					<button id="lightDarkToggle" onclick="lightDarkModeToggle()">
						<img class="icon" src="../assets/img/svg/dark.svg" alt="modeswitch-icon" />
						<span class="icon-text" data-i18n="dark-mode"></span>
					</button>
					<button id="lang-toggle">
						<span class="icon" id="lang-toggle-text">DE</span>
					</button>
				</div>
			</div>
		</header>

		<div class="side-line"></div>

		<main>
			<div class="content-container">
				<div class="topic-selector">
					<button id="topicClose" class="topic-close" aria-label="Close sidebar">
						<img src="../assets/img/svg/cancel.svg" alt="close" />
					</button>
					<!-- Loading of topics will use class "topic-category" for headers of categories -->
				</div>
				<div class="display-window">
					<div id="markdown-container">
						<!-- Loading of MarkDown content will be placed here -->
					</div>
				</div>
				<div class="right-panel">
					<button class="copy-button" id="copyButton" onclick="copyButtonTrigger()">
						<img class="icon" src="../assets/img/svg/copy.svg" alt="copy-icon" />
						<span class="icon-text" data-i18n="copy"></span>
					</button>
					<div id="right-panel-header"></div>
				</div>
			</div>
		</main>
		<footer>
			<a href="./credits.html">Credits</a>
			<a href="./help.html">Help</a>
		</footer>

		<!-- Overlay for sliding sidebar on small screens -->
		<div id="sidebarOverlay" class="sidebar-overlay" aria-hidden="true"></div>
	</body>
</html>
